<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  
    <script>
        function getComputerChoice() {
            let choices = ['rock','paper','scissors']
            let randomChoice = Math.floor(Math.random() * choices.length);
            return result = choices[randomChoice];
        }

        function playRound(playerChoice, computerChoice) {
            let result = "";
            let tie = "It's a tie!";

            if (playerChoice == computerChoice) {
                result = tie;
                console.log(result);
                resultsDisplay.textContent = result;
                return 0;
            }
            else if (playerChoice =='rock' && computerChoice == 'paper'){
                result = "You lose! Paper beats rock";
                console.log(result);
                resultsDisplay.textContent = result;
                return 2;
            } 
            else if (playerChoice == 'rock' && computerChoice == 'scissors'){
                result = "You win! Rock beats scissors";
                console.log(result);
                resultsDisplay.textContent = result;
                return 1;
            }
            else if (playerChoice == 'paper' && computerChoice == 'rock'){
                result = "You win! Paper beats rock";
                console.log(result);
                resultsDisplay.textContent = result;
                return 1;
            }
            else if (playerChoice == 'paper' && computerChoice == 'scissors'){
                result = "You lose! Scissors beat paper";
                console.log(result);
                resultsDisplay.textContent = result;
                return 2;
            }
            else if (playerChoice == 'scissors' && computerChoice == 'rock'){
                result = "You lose! Rock beats scissors";
                console.log(result);
                resultsDisplay.textContent = result;
                return 2;
            }
            else if (playerChoice == 'scissors' && computerChoice == 'paper'){
                result = "You win! Scissors beat paper";
                console.log(result);
                resultsDisplay.textContent = result;
                return 1;
            }
        }

        function game() {
            let playerScore = 0;
            let compScore = 0;
            
            let computerChoice ="";
            let playerChoice = "";
            // for(i = 0; i < 5; i++){
            //     computerChoice = getComputerChoice();
            //     playerChoice = prompt('Rock, paper, or scissors?').toLowerCase();

            //     console.log("computer: " + computerChoice);
            //     console.log("player: " + playerChoice);

            //     let winner = playRound(playerChoice, computerChoice);
            //     if(winner == 1) {
            //         playerScore++;
            //     } else if (winner == 2) {
            //         compScore++;
            //     }
            // }
            
            //replace choice buttons with restart button
            if (playerScore == compScore){
                console.log("It's a tie");
                resultsDisplay.textContent = "It's a tie";
            } else if (playerScore > compScore){
                console.log("You win");
                resultsDisplay.textContent = "You win";
            } else {
                console.log("You lose");
                resultsDisplay.textContent = "You lose";
            }
        }

        
        //game();

        let playerChoice = "";
        let computerChoice = "";
        let playerScore = 0;
        let compScore = 0;
        let winner = "";

        const body = document.querySelector('body');
        const buttons = document.querySelectorAll('button');
        
        const rockButton = document.createElement('button');
        rockButton.classList.add("rock");
        rockButton.textContent = "Rock!";
        rockButton.addEventListener('click',function(){
            computerChoice = getComputerChoice();
            playerChoice = getPlayerChoice(rockButton);
            console.log("player choice: " + playerChoice);
            console.log("computer choice: " + computerChoice);
            winner = playRound(playerChoice, computerChoice);
            checkWinner(winner);
        })
        body.append(rockButton);

        const paperButton = document.createElement('button');
        paperButton.classList.add("paper");
        paperButton.textContent = "Paper!";
        paperButton.addEventListener('click', function() {
            computerChoice = getComputerChoice();
            playerChoice = getPlayerChoice(paperButton);
            console.log("player choice: " + playerChoice);
            console.log("computer choice: " + computerChoice);
            winner = playRound(playerChoice, computerChoice);
            checkWinner(winner);
        })
        body.appendChild(paperButton);

        const scissorsButton = document.createElement('button');
        scissorsButton.classList.add("scissors");
        scissorsButton.textContent  = "Scissors!";
        scissorsButton.addEventListener('click', function() {
            computerChoice = getComputerChoice();
            playerChoice = getPlayerChoice(scissorsButton);
            console.log("player choice: " + playerChoice);
            console.log("computer choice: " + computerChoice);
            winner = playRound(playerChoice, computerChoice);
            checkWinner(winner);
        })
        body.appendChild(scissorsButton);

        const resultsContainer = document.createElement('div');
        resultsContainer.classList.add('results');

        const resultsDisplay = document.createElement('p');
        resultsDisplay.classList.add('display');
        resultsContainer.appendChild(resultsDisplay);
        body.appendChild(resultsContainer);


        const runningScore = document.createElement('p');
        runningScore.classList.add('running-score');
        resultsContainer.appendChild(runningScore);

        function getPlayerChoice(btn){
            playerChoice = btn.className;
            //console.log(playerChoice);
            return playerChoice;
        }

        function checkWinner(winner){
            if (winner == 1) {
                playerScore++;
                console.log("p score: " + playerScore);
                console.log("cpu score: " + compScore);
                runningScore.textContent = `player score: ${playerScore} cpu score: ${compScore}`;
            } else if (winner == 2){
                compScore++;
                console.log("p score: " + playerScore);
                console.log("cpu score: " + compScore);
                runningScore.textContent = `player score: ${playerScore} cpu score: ${compScore}`;
            } else {
                console.log("p score: " + playerScore);
                console.log("cpu score: " + compScore);
                runningScore.textContent = `player score: ${playerScore} cpu score: ${compScore}`;
            } 

            if (playerScore == 5) {//&& playerScore > compScore){
                resultsDisplay.textContent = "Overall winner is player";
                playerScore = 0;
                compScore = 0;
            } else if (compScore == 5) {// && compScore > playerScore) {
                resultsDisplay.textContent = "Overall winner is computer";
                playerScore = 0;
                compScore = 0;
            } else if (playerScore == 5){//&& compScore == 5) {
                resultsDisplay.textContent = "It's a tie!";
                playerScore = 0;
                compScore = 0;
            }
        }
    </script>
</body>
</html>